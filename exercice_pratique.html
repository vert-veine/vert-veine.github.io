<!DOCTYPE html>

<html>
  <head>
    <link href="./css.css" rel="stylesheet">
    <link href="./css_soluce.css" rel="stylesheet">
    <link href="./prism.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.css" integrity="sha384-OH8qNTHoMMVNVcKdKewlipV4SErXqccxxlg6HC9Cwjr5oZu2AdBej1TndeCirael" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.js" integrity="sha384-ImWHyYvDPlRzwFnvLhG9Jcpm/7qL4SVIuJK0C6Rj+Mf7fpeNJCLCynC+EVz4kCSA" crossorigin="anonymous"></script>
    
    <script>
    window.onload = function(e){ 
        // 
    }

    const f = function(id){
        const subContent =  document.querySelector("#" +id+ "> div");
        
        const rapport = window.screen.width/ window.screen.height
        const isP = rapport<.7

        if (subContent.className=="visible"){
            subContent.style.height = '0px'
        }
        else{
            const ph = subContent.getAttribute("pref_height")
            const numH = ph.substring(0, ph.length - 2 )

            const daH = numH * (isP ?2.7 : 1) 
            subContent.style.height = daH + 'px'
        }
        subContent.className = subContent.className =="visible" ? "hidden" : "visible"
    }


    const displayLtx = (e, i)=>{
        let element = document.getElementById('ltk'+ i)
        if(element){
            katex.render(formulas[i], element, {
                throwOnError: false
            })
        }
    }

    const formulas = [
        String.raw`w^{(1)} = \begin{pmatrix} 3 \\ 0 \\ 4 \\ 1 \end{pmatrix}`, 
        String.raw`w^{(2)} = \begin{pmatrix} 2 \\ -1.5 \\ 4 \\ 0.2 \end{pmatrix}`, 
        String.raw`w^{(3)} = \begin{pmatrix} 2.2 \\ 1.1 \\ -2.2 \\ 1.1 \end{pmatrix}`, 
        String.raw`w^{(4)} = \begin{pmatrix} 3.2 \\ 4 \\ 4.2 \\ 21.1 \end{pmatrix}`, 
        String.raw`b^1 = 2`, 
        String.raw`b^2 = -4.4`, 
        String.raw`b^3 = 3.1`, 
        String.raw`b^4 = -1.2`, 
        String.raw`\begin{pmatrix} 1 \kern{1em} 2 \\ 3 \kern{1em}  4 \end{pmatrix}`, 
        String.raw`x = \begin{pmatrix} 1 \\ 2 \\ 3 \\ 4 \end{pmatrix}`, 
        String.raw`\hat y`, //10 
        String.raw`w_1^t.b =  \begin{pmatrix} 3\kern{1em}  0\kern{1em}  4 \kern{1em} 1  \end{pmatrix} .  \begin{pmatrix} 1 \\ 2 \\ 3 \\ 4 \end{pmatrix} = 3 \times 1 +0 \times 2 + 4\times 3 \times + 1\times 4 = 19`, 
        String.raw`  `, 
        String.raw`w_2^t.b = \begin{pmatrix} 2 \kern{.5em} -1.5\kern{1em}  4 \kern{1em} 0.2  \end{pmatrix} .  \begin{pmatrix} 1 \\ 2 \\ 3 \\ 4 \end{pmatrix}= 3 \times 1 +0 \times 2 + 4\times 3 \times + 1\times 4 = 13.3`, 
        String.raw` w_3^t.b = 30.8    `, 
        String.raw` w_4^t.b = 3878.6`, 
        String.raw`\begin{bmatrix} 3  1  4  1 \\ 2  0  1  3 \\ 7  4  1  8 \\ 2  3  1  4 \end{bmatrix}`, 
    ]

      document.addEventListener("DOMContentLoaded", (event) => {
        for (const [i, s] of formulas.entries()) {
            displayLtx(s, i)
        }
    });
        </script>

  </head>
<body>  

<div id="e">
    <div id="titre">Calculs manuels des valeurs d'un réseau de neuronne</div>

    <br>Représentation d'un réseau à deux couches : <br>
    <img src="./img/nn_representation.png") id="big_nn" class="my_img" />
<br><br>
<u>Exercice pratique :</u>
<br>
Calculer la prévision <span id="ltk10"></span>, donnéé par le réseau de neuronnes ci-dessous, en sachant que : 

<br> <br>L'image de départ (de taille 2x2) est <span id="ltk8"></span>.


<br> <br>Les 4 neuronnes de la couche cachée ont les paramêtres suivants : <br><br>
<table >
 <tr class="tr_param">
    <td >Neuronne 1</td>
    <td >Neuronne 2</td>
    <td >Neuronne 3</td>
    <td >Neuronne 4</td>
    
 </tr>
 <tr class="tr_param">
     <td ><span id="ltk0"></span> </span></td>
    <td ><span id="ltk1"></span> </span></td>
    <td ><span id="ltk2"></span> </span></td>
    <td ><span id="ltk3"></span> </span></td>
 </tr>
 <tr class="tr_param">
    <td ><span id="ltk4"></span> </span></td>
    <td ><span id="ltk5"></span> </span></td>
    <td ><span id="ltk6"></span> </span></td>
    <td ><span id="ltk7"></span> </span></td>
 </tr>
</table>

<br>
<div id= "soluce">
<a onclick="f('soluce')" >Solution : </a> <br><br>
    <div  class="hidden" pref_height="650px" >
        <div>
            <br> En vectorisant l'image de départ on aura <span id="ltk9"></span>.
            <br>Pour le neuronne 1
            <br> <span id="ltk11"></span>
            <br> <br>De même pour le neuronne 2 : 
            <br> <span id="ltk13"></span>

            <br><br> Et en suivant
            <br> <span id="ltk14"></span>
            <br> <span id="ltk15"></span>           
        </div>
    </div>
</div>

<pre>
    <code class="language-css">import numpy
        for i in range(4):
            pass
    </code>
    </pre>
    <script src="prism.js"></script>
</body>

</html> 
